#include "dida/area.hpp"

#include <catch2/benchmark/catch_benchmark_all.hpp>
#include <catch2/catch_test_macros.hpp>
#include <cmath>

namespace dida::benchmarks
{

TEST_CASE("intersection_area benchmark")
{
  {
    ConvexPolygon2 a{{5.64, -3.62}, {6.44, 1.84}, {0.4, 4.66}, {-6.76, 2.56}, {-6.28, -1.2}, {-4.08, -5.18}};
    ConvexPolygon2 b{{-2.46, 4.24}, {-7.18, 0.18}, {1.76, -5.6}, {3.24, -5.22}, {7.02, -0.56}, {1.54, 5.74}};

    BENCHMARK("6 - 6 vertices")
    {
      return intersection_area(a, b);
    };
  }

  {
    ConvexPolygon2 a{{2.408, 5.442}, {-0.14, 5.06},  {-0.62, 4.74},  {-1.04, 3.84},  {-1.1, 3.2},
                     {-0.8, -4.46},  {-0.38, -5.52}, {0.26, -6.04},  {1.16, -6.16},  {11.1, -6.26},
                     {11.8, -6.18},  {12.6, -6.04},  {13.24, -5.52}, {13.62, -4.84}, {13.82, -3.7},
                     {13.64, 3.8},   {13.46, 4.56},  {12.22, 5.4},   {11.6, 5.6},    {6.06, 5.62}};
    ConvexPolygon2 b{{-2.09, 1.54},  {-2.53, 1.04},  {-2.73, 0.54}, {-2.65, -0.23}, {-2.19, -0.91},
                     {4.30, -7.43},  {5.16, -7.87},  {6.86, -8.23}, {7.58, -8.21},  {8.70, -7.83},
                     {14.78, -1.73}, {15.42, -0.77}, {15.54, 0.46}, {15.28, 1.40},  {12.22, 4.40},
                     {6.64, 6.68},   {5.56, 6.92},   {4.36, 6.82},  {3.18, 6.48},   {0.36, 4.36}};

    BENCHMARK("20 - 20 vertices")
    {
      return intersection_area(a, b);
    };
  }
}

} // namespace dida::benchmarks